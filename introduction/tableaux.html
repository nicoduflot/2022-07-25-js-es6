<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formation Javascript Es6</title>
    <link rel="stylesheet" href="../css/bootstrap.css" />
    <script src="../js/bootstrap.bundle.js"></script>
    <script language="javascript">
        //  avant es6
        /*
        var tableau = new Array('valeur', 1, 1.2, 'Renault');
        console.log(tableau);
        */

        let tableau = ['valeur', 1, 1.2, 'Renault'];
        console.log(tableau);

        let cars = ['Peugeot', 'Citroën', 'Ford', 'Renault'];
        console.log(cars);
        console.table(cars);
        console.log(cars[1]);
        console.log(`le tableau cars contient ${cars.length} élément(s) `);

        // les tableau sont l'équivalent d'objets itérables

        console.log('----------------- boucle for -------------');
        for(let i = 0; i < cars.length; i++){
            console.log(`la valeur de cars à l'indice ${i} est ${cars[i]}`);
        }

        console.log('----------------- boucle for in -------------');
        for(let index in cars){
            console.log(`la valeur de cars à l'index ${index} est ${cars[index]}`);
        }

        // le for in permet aussi de "regarder" tous les éléments (attributs ou méthodes) d'un objet

        let obj = {
            nom: 'Duflot',
            prenom: 'Nicolas',
            presentation: function(){
                return `je m'appele ${this.prenom} ${this.nom}`;
            }
        };

        console.log(obj);
        console.log(obj.nom);
        console.log(obj.presentation);
        console.log(obj.presentation());

        for(let key in obj){
            console.log(`la clef ${key} est ${obj[key]}`);
        }

        let obj2 = {
            nom: 'Sno',
            prenom: 'Jon',
            presentation: function(){
                return `je m'appele ${this.prenom} ${this.nom} et je connais rien`;
            }
        };

        console.log(obj2);
        console.log(obj2.nom);
        console.log(obj2.presentation);
        console.log(obj2.presentation());

        // depuis es6
        console.log('----------------- boucle for of -------------');
        for(let value of cars){
            console.log(`la valeur actuelle dans le tableau cars est ${value}`);
        }

        console.log('----------- boucle tant que -------------');
        let cpt = 0;
        while(cpt < cars.length){
            console.log(cars[cpt]);
            cpt++;
        }

        console.log('----------- boucle faire tant que -------------');
        cpt = 0;
        do{

            if(cars[cpt]){
                console.log(cars[cpt]);
            }
            cpt++;
        }
        while(cpt < cars.length)

        // forEach
        console.log('----------- méthode forEach -------------');
        cars.forEach( function(value, index, tab){
            console.log(`à l'index ${index} du tableau ${cars} | ${tab} la valeur est ${value}`);
        });

        // es6 méthode .entries()
        /*
        vient du modèle objet. permet d'extraire les clafs et les valeurs d'un tableau sous la forme d'un tableau de deux éléments,
        le premier étant la clef, le second la valeur
        */

        console.log('----------- méthode .entries() -------------');
        for(let entry of cars.entries()){
            console.log(entry);
        }

        // ajout d'élément
        // la méthode sale
        cars[cars.length] = 'Hyundai';
        console.log(cars);

        cars.push('Seat');
        cars.push('Fiat', 'Toyota');

        console.log(cars);

        let tabMoche = [];
        tabMoche[0] = 'truc';
        tabMoche[1] = 'Machin';
        tabMoche[5] = 'Bidule';
        tabMoche[2] = 'Oulala';

        console.log(tabMoche);

        for(let i = 0; i < tabMoche.length; i++){
            console.log(`la valeur de cars à l'indice ${i} est ${tabMoche[i]}`);
        }

        // supprimer des valeurs d'un tableau
        // .pop(), .shift(), .splice()

        // .pop() => extrait la dernière valeur du tableau
        let lastEntry = cars.pop();
        console.log(cars);
        console.log(lastEntry);
        // .shift() => extrait la première valeur du tableau et décale (shift) les index
        let firstEntry = cars.shift();
        console.log(cars);
        console.log(firstEntry);

        // splice() 1 :  extraire des valeurs dans le tableau (retourne un tableau)
        let removed = cars.splice(cars.indexOf('Ford'), 2);
        console.log(cars);
        console.log(removed);

        // splice() 2 : remplacer des valeurs dans le tableau (retourne un tableau)
        let replaced = cars.splice(cars.indexOf('Citroën'), 2, 'Alpine', 'Mazda');
        console.log(cars);
        console.log(replaced);

        // splice() 3 : inserrer des valeurs dans le tableau
        cars.splice(cars.indexOf('Mazda'), 0, removed[0], removed[1], replaced[0], replaced[1], firstEntry, lastEntry);
        console.log(cars);

        /* faire une copie du tableau cars dans un tableau appelé carsClone */
        let carsClone = cars.slice();
        carsClone.pop();
        console.log(carsClone);
        console.log(cars);
        cars.reverse(); // pas un tri, inverse toutes les données du tableau le derniers éléments se retrouve à l'indice 0, etc.
        console.log(cars);
        cars.sort();
        console.log(cars);
        let motTeste = 'kayak';
        let test = motTeste.split('');
        test = test.reverse();
        if(motTeste === test.join('')){
            console.log(`motTeste est un palyndrome`);
        }

        // et les tableau à 2 dimensions
        carsTest = [ ['Fiat', 1956], ['Kyia', 1995], ['Kyia', 1990], ['Ford', 1950], ['12', '2001'], ['12', '0250'] ];
        console.table(carsTest);
        carsTest.sort();
        console.table(carsTest);
        // les tableaux à deux dimension ne sont pas applicable en javascript
        let tab2d = [ ['a', 'b', 'c'], [12, 12, 13, 14, 15], [10, 23, 56, 4] ];
        console.log(tab2d);
        console.log(tab2d[1]);
        console.log(tab2d[1][2]);
        console.table(tab2d);
        console.log('------ parcourir tab2 for ----------');
        for(let i = 0; i < tab2d.length; i++ ){
            for(let j = 0; j < tab2d[i].length; j++){
                console.log(tab2d[i][j]);
            }
        }

        // avec un for of
        for(let value of tab2d){
            for(let subValue of value){
                console.log(subValue);
            }
        }

        //  recherche de la présence d'un élément

        // .find()
        console.log('----------- .find() ------------');
        let arrayNum = [5, 8, 12, 130, 3, 44];

        let found = arrayNum.find( function(element){
            return 20 < element;
        } );

        console.log(found);

        // .filter() => retourne toutes les occurences correpondant à la condition
        /*
        let foundFilter = arrayNum.filter( function(element){
            return 20 < element;
        } );
        */
       // opérateur arrow => raccourcis d'écriture des fonction de rappel ou callback function ou fonction anonyme
        /*
        let foundFilter = arrayNum.filter( (element)=>{
            return 20 < element;
        } );
        */
        /*
        let foundFilter = arrayNum.filter( (element)=>20 < element );
        */

        console.log(arrayNum.filter( (element)=> 20 < element ));

        // les fonctions anonyme peuvent avoir des conséquences (notamment sur les objets)
        console.log('--------- les conséquences -----------');
        let monObjet = {
            numbers: [5, 8, 12, 130, 3, 44],
            affTab: function(){
                console.log(this);
                let _this = this;
                this.numbers.forEach(function(value){
                    //console.log(this);
                    //console.log(_this);
                });
            },
            affTabArrow: function(){
                console.log(this);
                this.numbers.forEach( (value)=>{
                    console.log(this);
                });
            }
        }

        monObjet.affTab();
        monObjet.affTabArrow();

        // .map
        let numbers = [5, 8, 12, 130, 3, 44];
        let newNumbers = numbers.map(function(toto, i, tab){
            return toto*10;
        });

        console.log(numbers);
        console.log(newNumbers);
        
    </script>
</head>
<body>
    <nav class="navbar navbar-expand-lg bg-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="../">Accueil</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            Introduction
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="../introduction/index.html">Introduction</a></li>
                            <li><a class="dropdown-item" href="../introduction/tableaux.html">Tableaux</a></li>
                            <li><a class="dropdown-item" href="../introduction/fonctions.html">Fonctions</a></li>
                            <li><a class="dropdown-item" href="../introduction/destructuration.html">Déstructuration</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <main class="container">
        <section class="row">
            <article class="col">
                <header>
                    <h2>Les tableaux</h2>
                </header>
                <main>
                    <p>
                        Tous est dans la console & le code
                    </p>
                </main>
            </article>
        </section>
    </main>
</body>

</html>